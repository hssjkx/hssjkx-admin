<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>新增文档 - 光年(Light Year Admin)后台管理系统模板</title>
    <link rel="icon" href="favicon.ico" type="image/ico">
    <meta name="keywords" content="LightYear,光年,后台模板,后台管理系统,光年HTML模板">
    <meta name="description" content="LightYear是一个基于Bootstrap v3.3.7的后台管理系统的HTML模板。">
    <meta name="author" content="yinqi">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/materialdesignicons.min.css" rel="stylesheet">
    <!--标签插件-->
    <link rel="stylesheet" href="/static/js/jquery-tags-input/jquery.tagsinput.min.css">
    <link href="/static/css/style.min.css?v=0.01" rel="stylesheet">
    <!-- 富文本编辑器引入样式 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/css/froala_editor.css">
    <link rel="stylesheet" href="/static/css/froala_style.css">
    <link rel="stylesheet" href="/static/css/plugins/code_view.css">
    <link rel="stylesheet" href="/static/css/plugins/colors.css">
    <link rel="stylesheet" href="/static/css/plugins/emoticons.css">
    <link rel="stylesheet" href="/static/css/plugins/image_manager.css">
    <link rel="stylesheet" href="/static/css/plugins/image.css">
    <link rel="stylesheet" href="/static/css/plugins/line_breaker.css">
    <link rel="stylesheet" href="/static/css/plugins/table.css">
    <link rel="stylesheet" href="/static/css/plugins/char_counter.css">
    <link rel="stylesheet" href="/static/css/plugins/video.css">
    <link rel="stylesheet" href="/static/css/plugins/fullscreen.css">
    <link rel="stylesheet" href="/static/css/plugins/quick_insert.css">
    <link rel="stylesheet" href="/static/css/plugins/file.css">
    <link rel="stylesheet" href="/static/css/themes/gray.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.min.css">
</head>

<body>
<div class="lyear-layout-web">
    <div class="lyear-layout-container">
        <!--左侧导航-->

        <!--End 左侧导航-->
        <#include "/nav_bar.html"/>
        <!--头部信息-->
        <#include "/header.html"/>
        <!--页面主要内容-->
        <main class="lyear-layout-content">

            <div class="container-fluid">

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">

                                <form id="article_form" action="/submit" method="post" class="row"
                                      onsubmit="return submitnews()">
                                    <div class="form-group col-md-12">
                                        <label for="type">栏目</label>
                                        <div class="form-controls">
                                            <select name="type" class="form-control" id="type">
                                                <option value="1">学院概况</option>
                                                <option value="2">本科教育</option>
                                                <option value="3">学术科研</option>
                                                <option value="4">党团建设</option>
                                                <option value="5">学生工作</option>
                                                <option value="6">招生就业</option>
                                                <option value="7">信工风采</option>
                                                <option value="8">校友会</option>
                                            </select>
                                        </div>
                                    </div>
                                    <input type="hidden" name="id" id="id" value="${news.id?c}">
                                    <div class="form-group col-md-12">
                                        <label for="title">标题</label>
                                        <input type="text"  class="form-control" id="title" name="title" value="${news.title}"
                                               placeholder="请输入标题"/>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="seo_keywords">关键词</label>
                                        <input type="text" class="form-control" id="seo_keywords" name="seo_keywords"
                                               value="" placeholder="关键词"/>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="seo_description">描述</label>
                                        <textarea class="form-control" id="seo_description" name="seo_description"
                                                  rows="5" value="" placeholder="描述"></textarea>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label>封面</label>
                                        <div class="form-controls">
                                            <ul class="list-inline clearfix lyear-uploads-pic">
                                                <li class="col-xs-4 col-sm-3 col-md-2">
                                                    <figure>
                                                        <img src="images/gallery/15.jpg" alt="图片一">
                                                        <figcaption>
                                                            <a class="btn btn-round btn-square btn-primary" href="#!"><i
                                                                    class="mdi mdi-eye"></i></a>
                                                            <a class="btn btn-round btn-square btn-danger" href="#!"><i
                                                                    class="mdi mdi-delete"></i></a>
                                                        </figcaption>
                                                    </figure>
                                                </li>
                                                <!--                                                <li class="col-xs-4 col-sm-3 col-md-2">-->
                                                <!--                                                    <figure>-->
                                                <!--                                                        <img src="images/gallery/16.jpg" alt="图片二">-->
                                                <!--                                                        <figcaption>-->
                                                <!--                                                            <a class="btn btn-round btn-square btn-primary" href="#!"><i-->
                                                <!--                                                                    class="mdi mdi-eye"></i></a>-->
                                                <!--                                                            <a class="btn btn-round btn-square btn-danger" href="#!"><i-->
                                                <!--                                                                    class="mdi mdi-delete"></i></a>-->
                                                <!--                                                        </figcaption>-->
                                                <!--                                                    </figure>-->
                                                <!--                                                </li>-->
                                                <!--                                                <li class="col-xs-4 col-sm-3 col-md-2">-->
                                                <!--                                                    <figure>-->
                                                <!--                                                        <img src="images/gallery/17.jpg" alt="图片三">-->
                                                <!--                                                        <figcaption>-->
                                                <!--                                                            <a class="btn btn-round btn-square btn-primary" href="#!"><i-->
                                                <!--                                                                    class="mdi mdi-eye"></i></a>-->
                                                <!--                                                            <a class="btn btn-round btn-square btn-danger" href="#!"><i-->
                                                <!--                                                                    class="mdi mdi-delete"></i></a>-->
                                                <!--                                                        </figcaption>-->
                                                <!--                                                    </figure>-->
                                                <!--                                                </li>-->
                                                <li class="col-xs-4 col-sm-3 col-md-2">
                                                    <a class="pic-add" id="add-pic-btn" href="#!" title="点击上传"></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="content">内容</label>
                                        <section id="editor">
                                            ${news.content}
                                        </section>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="tags">标签</label>
                                        <input class="js-tags-input form-control" type="text" id="tags" name="tags"
                                               value=""/>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="sort">排序</label>
                                        <input type="text" class="form-control" id="sort" name="sort" value="0"/>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="status">状态</label>
                                        <div class="clearfix">
                                            <label class="lyear-radio radio-inline radio-primary">
                                                <input type="radio" name="status" value="0"><span>禁用</span>
                                            </label>
                                            <label class="lyear-radio radio-inline radio-primary">
                                                <input type="radio" name="status" value="1" checked><span>启用</span>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group col-md-12">
                                        <button type="button" onclick="submitnews()" class="btn btn-primary ajax-post"
                                                target-form="add-form">确
                                            定
                                        </button>
                                        <input type="button" value="test" onclick="add()">
                                        <!--                                        <button  class="btn btn-primary ajax-post" onclick="add()">测试-->
                                        </button>
                                        <button type="button" class="btn btn-default"
                                                onclick="javascript:history.back(-1);return false;">返 回
                                        </button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>

                </div>

            </div>

        </main>
        <!--End 页面主要内容-->
    </div>
</div>

<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/js/perfect-scrollbar.min.js"></script>
<!--标签插件-->
<script src="/static/js/jquery-tags-input/jquery.tagsinput.min.js"></script>
<script type="text/javascript" src="/static/js/main.min.js"></script>
<!--vue.js-->
<!--富文本编辑器插件-->
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/codemirror.min.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.3.0/mode/xml/xml.min.js"></script>
<script type="text/javascript" src="/static/js/froala_editor.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/align.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/code_beautifier.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/code_view.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/colors.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/draggable.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/emoticons.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/font_size.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/font_family.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/image.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/file.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/image_manager.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/line_breaker.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/link.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/lists.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/paragraph_format.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/paragraph_style.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/video.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/table.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/url.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/entities.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/char_counter.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/inline_style.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/quick_insert.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/save.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/fullscreen.min.js"></script>
<script type="text/javascript" src="/static/js/plugins/quote.min.js"></script>
<script type="text/javascript" src="/static/js/languages/zh_cn.js"></script>
<script type="text/javascript" src="/static/js/jquery.base64.js"></script>
<script>
    $.base64.utf8encode = true;

    var editor = new FroalaEditor('#editor', {
        theme: 'gray',
        language: 'zh_cn',
        imageUploadURL: 'uploadFile'
    }, function () {
        // console.log(editor.html.get())
    });

    function submitnews() {
        alert('submit')
        let title = $('#title').val()
        let category = $('#type').val()
        let content = editor.html.get()
        let id = $('#id').val()
        console.log(content)
        $.ajax({
            url: '/update',
            method: 'POST',
            data: JSON.stringify({
                title,
                category,
                content,
                id
            }),
            contentType: 'application/json',
            success: res => {
                alert('修改成功')
                window.location.href = document.referrer
                // history.go(-1)
                // location.reload()
            },
            fail: err => {
                alert(err)
            }
        })
    }
</script>

<script>

    // function submitnews() {
    //     alert('submit')
    //     let title = $('#title').val()
    //     let category = $('#type').val()
    //     let content = $('#edit').html()
    //
    //     return
    //     $.ajax({
    //         url: '/addnews',
    //         method: 'POST',
    //         data: JSON.stringify({
    //             title,
    //             category,
    //             content
    //         }),
    //         contentType: 'application/json',
    //         success: res => {
    //             alert(res)
    //         },
    //         fail: err => {
    //             alert(err)
    //         }
    //     })
    //
    //     return false
    // }

    // function add() {
    //     alert('submit')
    //     $.ajax({
    //         type: "POST",                           //通过POST方式上传请求
    //         contentType: "application/json",//上传内容格式为json结构
    //         data: JSON.stringify({
    //             title:'abc',
    //             category:'abcd',
    //             content:'acbde',
    //             cover:'abcd'
    //         }),                                 //上传的参数
    //         url: "/addnews",     //请求的url。与后端@Request Mapping注解中的值一致。
    //         success: function () {		      //请求成功的回调函数
    //             alert("添加用户成功")
    //         },
    //         error: function (e) {		      //请求失败的回调函数
    //             alert("添加用户失败")
    //         }
    //     })
    // }
</script>
</body>
</body>
</html>